"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[249],{850:function(e,n,t){t.d(n,{Z:function(){return b}});var r=t(885),a=t(2791),o=t(5861),c=t(7757),u=t.n(c),i=t(4569),s=t.n(i),l="aec86298015b623e3598e86276b5a670",f="https://api.themoviedb.org/3",p=function(e){if(200===e.status)return{data:0!==e.data.total_results?e.data:"",BasicURL:"https://image.tmdb.org/t/p/original"}},d=function(){var e=(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s().get("".concat(f,"/trending/movie/day?api_key=").concat(l)).then((function(e){return p(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,o.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s().get("".concat(f,"/movie/").concat(n,"?api_key=").concat(l,"&language=en-US")).then((function(e){return p(e)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=(0,o.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s().get("".concat(f,"/movie/").concat(n,"/credits?api_key=").concat(l,"&language=en-US")).then((function(e){return p(e)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s().get("".concat(f,"/movie/").concat(n,"/reviews?api_key=").concat(l,"&language=en-US&page=1")).then((function(e){return p(e)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=(0,o.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s().get("".concat(f,"/search/movie?api_key=").concat(l,"&query=").concat(n,"&language=en-US&page=1&include_adult=false")).then((function(e){return p(e)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=(0,a.useState)([]),n=(0,r.Z)(e,2),t=n[0],o=n[1],c=(0,a.useState)(""),u=(0,r.Z)(c,2),i=u[0],s=u[1],l=(0,a.useState)(""),f=(0,r.Z)(l,2),p=f[0],b=f[1],x=(0,a.useState)(""),Z=(0,r.Z)(x,2),y=Z[0],k=Z[1],w=(0,a.useState)(0),S=(0,r.Z)(w,2),_=S[0],q=S[1],j=(0,a.useState)(""),U=(0,r.Z)(j,2),M=U[0],R=U[1],C=(0,a.useState)([]),L=(0,r.Z)(C,2),P=L[0],B=L[1],D=(0,a.useState)(""),A=(0,r.Z)(D,2),z=A[0],F=A[1],H=(0,a.useState)([]),Q=(0,r.Z)(H,2),T=Q[0],E=Q[1],I=(0,a.useState)([]),G=(0,r.Z)(I,2),J=G[0],K=G[1],N=(0,a.useState)([]),O=(0,r.Z)(N,2),V=O[0],W=O[1],X=(0,a.useState)(""),Y=(0,r.Z)(X,2),$=Y[0],ee=Y[1],ne=function(e){h(e).then((function(e){var n=e.data,t=e.BasicURL;n&&(s(t),b(n.original_title),k(n.release_date.slice(0,4)),q(n.vote_average),R(n.overview),B(n.genres),F(n.poster_path))})).catch((function(e){console.log(e.message),ee("Request error !!!")}))},te=(0,a.useCallback)((function(e){var n=e.locationPathname,t=e.movieId,r=void 0===t?0:t,a=e.query,c=void 0===a?"":a;switch(n){case"/":d().then((function(e){var n=e.data;n&&o(n.results)})).catch((function(e){console.log(e.message),ee("Request error !!!")}));break;case"/movies/".concat(r):ne(r);break;case"/movies/".concat(r,"/cast"):ne(r),function(e){g(e).then((function(e){var n=e.data,t=e.BasicURL;n&&(E(n.cast),s(t))})).catch((function(e){console.log(e.message),ee("Request error !!!")}))}(r);break;case"/movies/".concat(r,"/reviews"):ne(r),function(e){v(e).then((function(e){var n=e.data;n&&K(n.results)})).catch((function(e){console.log(e.message),ee("Request error !!!")}))}(r);break;case"/movies?query=".concat(c):!function(e){m(e).then((function(e){var n=e.data;W(n.results),ee("")})).catch((function(n){console.log(n.message),W([]),ee("By request ".concat(e," nothing was found."))}))}(c);break;default:console.log("hook error")}}),[]);return{errorMessage:$,trendsMovies:t,basicUrl:i,title:p,releaseDate:y,rating:_,overview:M,genres:P,poster:z,profileActors:T,reviews:J,searchMoviews:V,setApiMoveDetails:te}}},1266:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var r,a,o,c=t(885),u=t(501),i=t(2791),s=t(168),l=t(6444),f=l.ZP.form(r||(r=(0,s.Z)(["\n  margin-top: 15px;\n  input {\n    padding: 5px 8px;\n    border: solid 2px #000000;\n    font-size: 15px;\n    &:focus {\n      color: #329fd6;\n    }\n  }\n  button {\n    padding: 5px 8px;\n    font-size: 15px;\n    background-color: transparent;\n    &:hover,\n    &:focus {\n      color: #329fd6;\n      border-color: #329fd6;\n    }\n    &[disabled] {\n      background-color: #e9e9ec9f;\n    }\n  }\n"]))),p=t(184),d=function(e){var n=e.onSubmit,t=e.onQuery,r=(0,i.useState)(t),a=(0,c.Z)(r,2),o=a[0],u=a[1],s=(0,i.useState)(!0),l=(0,c.Z)(s,2),d=l[0],h=l[1];return(0,p.jsxs)(f,{onSubmit:function(e){e.preventDefault(),n(o),u(""),h("")},children:[(0,p.jsx)("input",{onChange:function(e){u(e.target.value),""!==o.trim()&&h(!1)},type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",value:o}),(0,p.jsx)("button",{type:"submit",disabled:d,children:"Search"})]})},h=t(6871),g=l.ZP.ul(a||(a=(0,s.Z)(["\n  margin-top: 15px;\n  padding-bottom: 15px;\n  span {\n    color: #329fd6;\n  }\n"]))),v=l.ZP.p(o||(o=(0,s.Z)(["\n  padding-top: 5px;\n  color: #329fd6;\n"]))),m=t(850),b=function(e){var n=e.query,t="".concat((0,h.TH)().pathname||"").concat((0,h.TH)().search||""),r=(0,m.Z)(),a=r.errorMessage,o=r.searchMoviews,c=r.setApiMoveDetails;return(0,i.useEffect)((function(){n&&c({locationPathname:t,query:n})}),[t,c,n]),(0,p.jsxs)(p.Fragment,{children:[0===a.length&&0===o.length&&(0,p.jsx)(v,{children:"Loading ..."}),a.length>0&&(0,p.jsx)(v,{children:a}),o.length>0&&(0,p.jsx)(g,{children:o.map((function(e){return(0,p.jsx)("li",{children:(0,p.jsx)(u.rU,{to:"".concat(e.id),children:e.original_title})},e.id)}))})]})},x=function(e){var n,t=e.onLocation,r=(0,u.lr)(),a=(0,c.Z)(r,2),o=a[0],i=a[1],s=null!==(n=o.get("query"))&&void 0!==n?n:"";return(0,p.jsxs)("main",{children:[(0,p.jsx)(d,{onQuery:s,onSubmit:function(e){i(""!==e?{query:e}:{}),t(e)}}),s&&(0,p.jsx)(b,{query:s})]})}}}]);
//# sourceMappingURL=Movies.e0c12d2a.chunk.js.map